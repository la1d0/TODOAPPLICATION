{% extends 'base.html' %}

{% block content %}
<div class="text-center">
    <h1>{{ title }}</h1>
    <a href="{% url 'addpage' %}" class="btn btn-success">‚ûï –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</a>
</div>

<ul class="list-tasks">
    {% for t in tasks %}
    <li class="task-item">
        <h2>{{ t.title }}</h2>
        <p>{{ t.content }}</p>

        <div class="task-meta">
            <small>–°–æ–∑–¥–∞–Ω–æ: {{ t.time_created|date:"d.m.Y H:i" }}</small>
            <br>
            <strong>–°—Ç–∞—Ç—É—Å:
                {% if t.status %}
                    <span style="color: #27ae60;">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                {% else %}
                    <span style="color: #e67e22;">‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                {% endif %}
            </strong>
        </div>

        <div class="task-actions">
            <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ -->
            <form method="post" action="{% url 'toogletask' t.pk %}">
                {% csrf_token %}
                <button type="submit" class="btn">
                    {% if t.status %}
                        ‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É
                    {% else %}
                        ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    {% endif %}
                </button>
            </form>

            <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è -->
            <form method="post" action="{% url 'deletetask' t.pk %}">
                {% csrf_token %}
                <button type="submit" class="btn-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?')">
                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                </button>
            </form>
        </div>
    </li>
    {% empty %}
    <li class="task-item text-center">
        <p>üéâ –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á! –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É.</p>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block navigation %}
<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
{% if page_obj.has_other_pages %}
<nav class="list-pages">
    <ul>
        {% if page_obj.has_previous %}
        <li class="page-num">
            <a href="?page={{ page_obj.previous_page_number }}" title="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">&lt;</a>
        </li>
        {% endif %}

        {% for p in paginator.page_range %}
            {% if page_obj.number == p %}
            <li class="page-num page-num-selected">{{ p }}</li>
            {% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %}
            <li class="page-num">
                <a href="?page={{ p }}">{{ p }}</a>
            </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
        <li class="page-num">
            <a href="?page={{ page_obj.next_page_number }}" title="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">&gt;</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endif %}

<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
{% if page_obj %}
<div class="pagination-info text-center">
    <small style="color: #6c757d;">
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ paginator.num_pages }}
        ‚Ä¢ –í—Å–µ–≥–æ –∑–∞–¥–∞—á: {{ paginator.count }}
    </small>
</div>
{% endif %}

{% endblock %}